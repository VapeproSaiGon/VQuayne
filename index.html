<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Vòng Quay VapePro SaiGon</title>
    <link rel="stylesheet" href="css/typo/typo.css" />
    <link rel="stylesheet" href="css/hc-canvas-luckwheel.css" />
   
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <script src="https://kit.fontawesome.com/117209fe0f.js" crossorigin="anonymous"></script>
  </head>
  <body >
    <div class="headerr">
      <svg viewBox="0 0 178 40" width="178" height="40">
        <!-- dash included behind the car
        ! be sure to delay the animation of the path after the dashes on the right side of the car
        -->
        <path
          class="air"
          d="M 46 16.5 h -20 a 8 8 0 0 1 0 -16"
          fill="none"
          stroke="#E85725"
          stroke-width="1"
          stroke-linejoin="round"
          stroke-linecap="round">
        </path>
      
        <!-- wrap the svg describing the car in a group
        this to translate the car horizontally within the wrapping svg
        -->
        <g id="car">
          <!-- svg describing the race car in a container 118 wide and 28.125 tall
          .125 due to the 2.25 width of the stroke
      
          position in the bottom center of the wrapping svg
          -->
          <svg viewBox="0 0 118 28.125" x="30" y="11.725" width="118" height="28.125">
            <defs>
              <!-- circle repeated for the wheel -->
              <circle
                id="circle"
                cx="0"
                cy="0"
                r="1">
              </circle>
              <!-- wheel
              three overlapping circles describing the parts of the wheel
              in between the circles add path elements to detail the graphic
              -->
              <g id="wheel">
                <use href="#circle" fill="#1E191A" transform="scale(10)"></use>
                <use href="#circle" fill="#fff" transform="scale(5)"></use>
                <!-- inner shadow -->
                <path
                  fill="#1E191A"
                  stroke="#1E191A"
                  stroke-width="0.5"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  opacity="0.2"
                  stroke-dashoffset="0"
                  d="M -3.5 0 a 4 4 0 0 1 7 0 a 3.5 3.5 0 0 0 -7 0">
                </path>
                <use href="#circle" fill="#1E191A" transform="scale(1.5)"></use>
                <!-- yellow stripe
                include stroke-dasharray values totalling the circumference of the circle
                this to use the dash-offset property and have the stripe rotate around the center while keeping its shape
                ! explicitly set the stroke-dashoffset property to 0 for the other path elements (in this way the stroke-dashoffset attribute added through the <use> element affects only this path)
                -->
                <path
                  fill="none"
                  stroke="#F9B35C"
                  stroke-width="0.75"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  stroke-dasharray="20 14 8 5"
                  d="M 0 -7.5 a 7.5 7.5 0 0 1 0 15 a 7.5 7.5 0 0 1 0 -15">
                </path>
                <!-- outer glow (from a hypothetical light source) -->
                <path
                  fill="none"
                  stroke="#fff"
                  stroke-width="1"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  opacity="0.1"
                  stroke-dashoffset="0"
                  d="M -6.5 -6.25 a 10 10 0 0 1 13 0 a 9 9 0 0 0 -13 0">
                </path>
              </g>
            </defs>
            <!-- group describing the pilot's helmet
            translate in the middle of the cockpit
            -->
            <g transform="translate(51.5 11.125)">
              <path
                stroke-width="2"
                stroke="#1E191A"
                fill="#EF3F33"
                d="M 0 0 v -2 a 4.5 4.5 0 0 1 9 0 v 2">
              </path>
              <rect
                fill="#1E191A"
                x="3.25"
                y="-3"
                width="5"
                height="3">
              </rect>
            </g>
      
            <!-- group describing the car -->
            <g transform="translate(10 24.125)">
              <!-- shadow below the car
              ! change the transform-origin of the shadow to animate it from the top center
              the idea is to skew the shadow as the car moves
              -->
              <g transform="translate(59 0)">
                <path
                  id="shadow"
                  opacity="0.7"
                  fill="#1E191A"
                  d="M -64 0 l -4 4 h 9 l 8 -1.5 h 100 l -3.5 -2.5">
                </path>
              </g>
              <!-- path describing the frame of the car
              ! do not add a stroke at the bottom of the frame
              additional lines are overlapped to detail the belly of the vehicle
              -->
              <path
                fill="#fff"
                stroke="#1E191A"
                stroke-width="2.25"
                stroke-linecap="round"
                stroke-linejoin="round"
                d="M 0 0 v -10 l 35 -13 v 5 l 4 0.5 l 0.5 4.5 h 35.5 l 30 13">
              </path>
      
              <!-- wings -->
              <g
                fill="#fff"
                stroke="#1E191A"
                stroke-width="2.25"
                stroke-linecap="round"
                stroke-linejoin="round">
                <path
                  d="M -6 0 v -22 h 10 z">
                </path>
                <path
                  d="M 105 0 h -3 l -12 -5.2 v 6.2 h 12">
                </path>
              </g>
      
              <!-- grey areas to create details around the car's dashes -->
              <g
                fill="#949699"
                opacity="0.7">
                <rect
                  x="16"
                  y="-6"
                  width="55"
                  height="6">
                </rect>
                <path
                  d="M 24 -14 l 13 -1.85 v 1.85">
                </path>
              </g>
      
              <!-- dashes included sparingly on top of the frame -->
              <g
                fill="none"
                stroke="#1E191A"
                stroke-width="2.25"
                stroke-linecap="round"
                stroke-linejoin="round">
                <path
                  stroke-dasharray="30 7 42"
                  d="M 90 0 h -78">
                </path>
                <path
                  d="M 39.5 -13 h -15">
                </path>
              </g>
      
              <!-- elements describing the side of the car -->
              <path
                fill="#fff"
                stroke="#1E191A"
                stroke-width="2.25"
                stroke-linejoin="round"
                d="M 48.125 -6 h -29 v 6 h 29"><!-- .125 to tuck the path behind the rectangle and avoid a pixel disconnect as the svg is scaled -->
              </path>
      
              <rect
                x="48"
                y="-7.125"
                width="6.125"
                height="7.125"
                fill="#1E191A">
              </rect>
      
              <!-- rear view mirror -->
              <g fill="#1E191A">
                <rect
                  x="60"
                  y="-15"
                  width="1"
                  height="6">
                </rect>
                <rect
                  x="56.5"
                  y="-17.5"
                  width="6"
                  height="2.5">
                </rect>
              </g>
            </g>
      
            <!-- group describing the wheels, positioned at the bottom of the graphic and at either end of the frame -->
            <g class="wheels" transform="translate(0 18.125)">
              <g transform="translate(10 0)">
                <use href="#wheel"></use>
              </g>
      
              <g transform="translate(87 0)">
                <!-- add an offset to rotate the yellow stripe around the center -->
                <use href="#wheel" stroke-dashoffset="-22"></use>
              </g>
            </g>
          </svg>
        </g>
      
        <!-- dashes included above and around the race car
        ! include them in order from right to left
        this allows to rapidly assign an increasing delay in the script, to have the dashes animated in sequence
        -->
        <g
          fill="none"
          stroke-width="1"
          stroke-linejoin="round"
          stroke-linecap="round">
          <!-- right side -->
          <path
            class="air"
            stroke="#E85725"
            d="M 177.5 34 h -10 q -16 0 -32 -8">
          </path>
      
          <path
            class="air"
            stroke="#949699"
            d="M 167 28.5 c -18 -2 -22 -8 -37 -10.75">
          </path>
      
          <path
            class="air"
            stroke="#949699"
            d="M 153 20 q -4 -1.7 -8 -3">
          </path>
      
          <path
            class="air"
            stroke="#E85725"
            d="M 117 16.85 c -12 0 -12 16 -24 16 h -8"><!-- around (117 29.85) where the right wheel is centered -->
          </path>
      
          <!-- left side -->
          <path
            class="air"
            stroke="#949699"
            d="M 65 12 q -5 3 -12 3.8">
          </path>
      
          <path
            class="air"
            stroke="#949699"
            stroke-dasharray="9 10"
            d="M 30 13.5 h -2.5 q -5 0 -5 -5">
          </path>
      
          <path
            class="air"
            stroke="#949699"
            d="M 31 33 h -10">
          </path>
      
          <path
            class="air"
            stroke="#949699"
            d="M 29.5 23 h -12">
          </path>
          <path
            class="air"
            stroke="#949699"
            d="M 13.5 23 h -6">
          </path>
      
          <path
            class="air"
            stroke="#E85725"
            d="M 28 28 h -27.5">
          </path>
        </g>
      </svg>
      <div class="containerr">
        <a href="https://www.facebook.com/profile.php?id=100094716297335">
          <i class="fa fa-facebook-square" id="apple"></i>
        
          </a>
        
          <a href="tel:0966084788">
          <i class="fa-solid fa-phone-volume" id="facebook"></i>
          </a>
          
          <a href="https://www.tiktok.com/@vapepro_sg">
        
        <i class="fa-brands fa-tiktok fa-beat-fade" id="twitter"></i>
          </a>
          <a href="https://maps.app.goo.gl/qaTskEKuuuoTcr5B7">
          
          <i class="fa-solid fa-location-dot" id="github"></i>
          </a>
        </div>
    </div>
  <div class="container" id="container">
   
    <div class="wrapper typo" id="wrapper">
      <section id="luckywheel" class="hc-luckywheel">
        <div class="hc-luckywheel-container">
          <canvas class="hc-luckywheel-canvas" width="500px" height="500px"
            >Vòng Xoay May Mắn</canvas
          >
        </div>
        <a class="hc-luckywheel-btn" href="javascript:;">Xoay</a>
      </section>
    </div>
    <div class="pushvoucher mt-4 d-flex flex-column rounded-borderrr grey-color py-4 px-3 ">

      <form method="post" action="" id="sheetdb-form">  
        <div class="chu">
      <h2>
        VAPEPRO
      </h2>
    </div>
      
      <div class="sdt">
        <label for="SDT"><b>Phone Number</b></label>
        <input type="text" placeholder="VaPePro SaiGon" name="SDT" required>
        </div>
        <div class="branch">
        
        <input type="text" placeholder="Hang tough!" name="CHINHANH" required>
        </div>
        <input type="hidden" value="0" name="LSD">
        <div class="clearfix">   
        
          <button type="hi" class="checkbtn">Kiểm tra</button> <!-- Thêm button Kiểm tra -->
          <script>
            function disableButton() {
                var btn = document.getElementById("checkBtn");
                btn.disabled = true;
            }
        </script>
          <script>
          var animateButton = function(e) {
    
              e.preventDefault;
              //reset animation
              e.target.classList.remove('animate');
    
              e.target.classList.add('animate');
              setTimeout(function(){
              e.target.classList.remove('animate');
              },700);
              };
    
              var bubblyButtons = document.getElementsByClassName("checkbtn");
    
              for (var i = 0; i < bubblyButtons.length; i++) {
              bubblyButtons[i].addEventListener('click', animateButton, false);
    }
          </script>
        </div>
       
      </form>
      
      </div>
     
      <div class="clearfixx hide-button">   
			  <a  href="#">
				<span></span>
				<span></span>
				<span></span>
				<div  class="h11">
				  <button class="Click-here ">    KHUI QUÀ   </button>
				</div>
				<span></span> 
			  </a>
			
			  
			</div>
           
      <div class="custom-model-main">
        <div class="custom-model-inner">        
          <div class="close-btn">×</div>
          <div class="custom-model-wrap">
            <div class="pop-up-content-wrap">
             Nhập Sdt Trước Khi Quay Nhaa. VapePro cảm ơn sử ủng hộ của bạn thời gian qua!!
            </div>
          </div>  
        </div>  
        <div class="bg-overlay"></div>
      </div> 
      <div class="custom-model-mainn">
        <div class="custom-model-innerr">        
          <div class="close-btnn">×</div>
          <div class="custom-model-wrapp">
            <div class="pop-up-content-wrapp">
             | Tặng thêm NetFilx 1 Month Khi hoàn thành đơn hàng| Khách nhớ Click Button ở Web để về FanPage VapePro SaiGon nhận quà nhee.
            </div>
          </div>  
        </div>  
        <div class="bg-overlayy"></div>
      </div> 
      <div class="mann">
      <div class="man">
        <div class="scene">
          <div class="cube">
            <div class="side back"></div>
            <div class="side left"></div>
            <div class="side right"></div>
            <div class="side top"></div>
            <div class="side bottom"></div>
            <div class="side front"></div>
          </div>
          </div>
          <div class="scene">
          <div class="cube1">
            <div class="side back1"></div>
            <div class="side left1"></div>
            <div class="side right1"></div>
            <div class="side top1"></div>
            <div class="side bottom1"></div>
            <div class="side front1"></div>
          </div>
          </div>
        </div>
      </div>
      <div class="float-btns">
        <a href="tel:0966084788" class="btn-phone">
          <div class="circle-border" style="transform-origin: center;"></div>
          <div class="circle-fill" style="transform-origin: center;"></div>
          <div class="img-circle" style="transform-origin: center;">
          <div class="icon icon-phone" style="transform-origin: center;"></div> 
          </div>
        </a>
        
        <a href="https://zalo.me/0966084788" class="btn-zalo">
          <div class="circle-border" style="transform-origin: center;"></div>
          <div class="circle-fill" style="transform-origin: center;"></div>
          <div class="img-circle" style="transform-origin: center;">
          <div class="icon icon-zalo" style="transform-origin: center;"></div> 
          </div>
        </a>
        </div>
        <div class="diachi hide-button ">
          <h3 data-text="VAPEPRO SAIGON: UY TÍN - CHẤT LƯỢNG- TẬN TÂM">VAPEPRO SAIGON: UY TÍN - CHẤT LƯỢNG- TẬN TÂM</h3>
          
        </div>
    </div>

</body>

    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@9"></script>
    <script src="js/hc-canvas-luckwheel.js"></script>
 <script>
  var diachi = document.querySelector('.diachi');
if (window.innerWidth < 700) {

diachi.classList.remove('hide-button');
}
const container = document.getElementById('container');

var checkButton = document.querySelector('.checkbtn');
checkButton.addEventListener('click', function() {
var phoneNumber = document.querySelector('input[name="SDT"]').value; // Lấy giá trị số điện thoại từ trường nhập liệu
var   phoneNumberr=phoneNumber-0
var lsdValues = []
var dqValues = []
fetch('https://sheetdb.io/api/v1/iqad2ee3ao21y', {
method: 'GET',
})
.then(response => response.json())
.then(data => {
var found = false;
var phoneNumberrIndex = -1
for (var i = 0; i < data.length; i++) {
var rowData = data[i];
var email = rowData['SDT']; // Trường email từ SheetDB
var lsd = rowData['LSD'];
var dq=rowData['DQ'];

if (email == phoneNumberr) {
lsdValues.push(lsd); // Thêm giá trị lsd vào mảng lsdValues
dqValues.push(dq); 


}
}
console.log(lsdValues)
for (var i = 0; i < data.length; i++) {
var rowData = data[i];
var email = rowData['SDT']; // Trường email từ SheetDB


if ( email == phoneNumberr) {
phoneNumberrIndex=i+
console.log(phoneNumberrIndex)
found = true;
psw = rowData['Ưu đãi áp dụng']; // Lấy giá trị của trường psw khi số điện thoại đúng
break;
}
} 

if (found) {
var hasValueLessThanOne = false;
var daquay = false;

for (var i = 0; i < lsdValues.length; i++) {
if (lsdValues[i] < 1) {
hasValueLessThanOne = true;
break;
}
}


if (hasValueLessThanOne) {
if ( phoneNumber>0){  alert("Bạn đã quay thưởng rồi, hẹn gặp bạn ở vòng quay sau nhaa. ");}
else {alert(" Nhớ nhập SDT nhaa. VapePro cảm ơn sử ủng hộ của bạn thời gian qua!! ");}

} else {



alert("VapePro trân trọng cảm ơn sự ủng hộ của bạn thời gian qua. Bạn có 2 lượt quay quà siêu khủng nhaa");}



} else{
alert("SDT chưa mua hàng ở VapePro. Vapepro rất vui nếu được hỗ trợ bạn nhaa.");
}
})
.catch(error => {
console.error(error); // In lỗi nếu có
});
var pushvoucherr = document.querySelector('.pushvoucher');
var diachi = document.querySelector('.diachi');

pushvoucherr.classList.add('hide-button');
diachi.classList.remove('hide-button');


});
const scriptURL = 'https://script.google.com/macros/s/AKfycbzw-4sQZcSUrIFynugYPLY5oxy6MsVo0iI66M1LDzQ2hSoLLF80HpTqCd29VoHx5I9Kmw/exec'
var isPercentage = true;
var prizes = [
{
  text: "Áo thun J2Team",
  img: "images/3.png",
  number: 1, // 1%,
  percentpage: 0.0 // 1%
},
{
  text: "Nón J2 Team",
  img: "images/1.png",
  number: 1,
  percentpage: 0.0 // 5%
},
{
  text: "Vòng Tay J2Team",
  img: "images/2.png",
  number : 1,
  percentpage: 0.0// 10%
},
{
  text: "J2Team Security",
  img: "images/4.png",
  number: 1,
  percentpage: 0 // 24%
},
{
  text: "Chúc bạn may mắn lần sau !",
  img: "images/miss.png",
  percentpage:1// 60%
},
];
function updatePrizes() {
// Thay đổi giá trị của biến prizes
prizes = [
{
text: "Áo thun J2Team",
img: "images/3.png",
number: 1, // 1%,
percentpage: 0.0 // 1%
},
{
text: "Nón J2 Team",
img: "images/1.png",
number: 1,
percentpage: 0.0 // 5%
},
{
text: "Vòng Tay J2Team",
img: "images/2.png",
number : 1,
percentpage: 0.0// 10%
},
{
text: "J2Team Security",
img: "images/4.png",
number: 1,
percentpage: 1 // 24%
},
{
text: "Chúc bạn may mắn lần sau !",
img: "images/miss.png",
percentpage: 0 // 60%
},
];

// Thực hiện các hành động khác sau khi thay đổi giá trị của biến prizes
}
document.addEventListener(
"DOMContentLoaded",
function() {

hcLuckywheel.init({
id: "luckywheel",
config: function(callback) {
callback &&
  callback(prizes);
},
mode : "both",
getPrize: function(callback) {
var rand = randomIndex(prizes);
var chances = rand;
callback && callback([rand, chances]);
},
gotBack: function(data) {

if(data == null){


 
} else if (data == 'Chúc bạn may mắn lần sau !'){
  Swal.fire({
title: 'Chưa trúng quà mất rồi, bạn còn 1 lượt quay nha.',
text: data,
icon: 'error',
showCancelButton: false,
confirmButtonColor: '#3085d6',
confirmButtonText: 'OK',
customClass: {
popup: 'custom-swal-popup',
title: 'custom-swal-title',
text: 'custom-swal-text',
confirmButton: 'custom-swal-confirm-button'
}
});
  updatePrizes();
  var phoneNumber = document.querySelector('input[name="SDT"]').value;
var formData = new FormData();
var currentTime = new Date().toLocaleString();
formData.append('SDT',phoneNumber);
  formData.append('TT', "CHUA TRUNG");

  formData.append('Time', currentTime);
  // Gửi POST request đến URL script với dữ liệu đã được đóng gói
  fetch(scriptURL, { method: 'POST', body: formData })
    .then(function(response) {
    console.log('Gửi thành công!', response);
    // Xử lý phản hồi từ server nếu cần
    })
    .catch(function(error) {
    console.error('Lỗi:', error);
    // Xử lý lỗi nếu cần
    });

} else{

      var clickHereButton = document.querySelector('.clearfixx');
clickHereButton.classList.remove('hide-button');
document.querySelector('.Click-here').addEventListener('click', function() {
document.querySelector('.custom-model-main').classList.add('model-open');
setTimeout(function() {
document.querySelector('.custom-model-mainn').classList.add('model-openn');
}, 1000); // Delay 500 milliseconds before adding 'model-openn' class
});

document.querySelector('.close-btn').addEventListener('click', function() {
document.querySelector('.custom-model-main').classList.remove('model-open');

});

document.querySelector('.bg-overlay').addEventListener('click', function() {
document.querySelector('.custom-model-main').classList.remove('model-open');

});
document.querySelector('.close-btnn').addEventListener('click', function() {

document.querySelector('.custom-model-mainn').classList.remove('model-openn');
});

document.querySelector('.bg-overlayy').addEventListener('click', function() {

document.querySelector('.custom-model-mainn').classList.remove('model-openn');
});
var popUpContentWrap = document.querySelector('.pop-up-content-wrap');

var dataContent = psw;
console.log(dataContent);
popUpContentWrap.textContent = dataContent;
var phoneNumber = document.querySelector('input[name="SDT"]').value;
var currentTime = new Date().toLocaleString();
var formData = new FormData();
formData.append('SDT',phoneNumber);
  formData.append('TT', "DA TRUNG");
  formData.append('DQ',"1");
  formData.append('Time', currentTime);
  // Gửi POST request đến URL script với dữ liệu đã được đóng gói
  fetch(scriptURL, { method: 'POST', body: formData })
    .then(function(response) {
    console.log('Gửi thành công!', response);
    // Xử lý phản hồi từ server nếu cần
    })
    .catch(function(error) {
    console.error('Lỗi:', error);
    // Xử lý lỗi nếu cần
    });
}
}
});
},
false
);
function randomIndex(prizes){
if(isPercentage){
var counter = 1;
for (let i = 0; i < prizes.length; i++) {
if(prizes[i].number == 0){
counter++
}
}
if(counter == prizes.length){
return null
}
let rand = Math.random();
let prizeIndex = null;
console.log(rand);
switch (true) {
case rand < prizes[4].percentpage:
prizeIndex = 4 ;
break;
case rand < prizes[4].percentpage + prizes[3].percentpage:
prizeIndex = 3;
break;
case rand < prizes[4].percentpage + prizes[3].percentpage + prizes[2].percentpage:
prizeIndex = 2;
break;
case rand < prizes[4].percentpage + prizes[3].percentpage + prizes[2].percentpage + prizes[1].percentpage:
prizeIndex = 1;
break;  
case rand < prizes[4].percentpage + prizes[3].percentpage + prizes[2].percentpage + prizes[1].percentpage  + prizes[0].percentpage:
prizeIndex = 0;
break;  
}
if(prizes[prizeIndex].number != 0){
prizes[prizeIndex].number = prizes[prizeIndex].number - 1
return prizeIndex
}else{
return randomIndex(prizes)
}
}else{
var counter = 0;
for (let i = 0; i < prizes.length; i++) {
if(prizes[i].number == 0){
counter++
}
}
if(counter == prizes.length){
return null
}
var rand = (Math.random() * (prizes.length)) >>> 0;
if(prizes[rand].number != 0){
prizes[rand].number = prizes[rand].number - 1
return rand
}else{
return randomIndex(prizes)
}
}
}

 </script>
</html>
